#! /bin/sh

_die () {
  echo $1
  exit 1
}

_usage () {
	echo "Usage: xenv <env-file> <cmd>"
	echo "  env-file - Path to env file."
	echo "  cmd - Bash command to sandbox."
	exit 0
}

if [ $# -lt 2 ]; then
	_usage
fi

if [ -f $1 ]; then
	eval $(grep -v '^#' $1 | sed 's/^/export /g')
else
	_die "'$1' not found."
fi

shift

$@
